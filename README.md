–í–∞–ª—é—Ç–Ω—ã–π –∫–æ—à–µ–ª–µ–∫ –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –∏ —Å–∏–º—É–ª—è—Ü–∏–∏ —Ç–æ—Ä–≥–æ–≤–ª–∏ —Ñ–∏–∞—Ç–Ω—ã–º–∏ –∏ –∫—Ä–∏–ø—Ç–æ–≤–∞–ª—é—Ç–∞–º–∏.

finalproject_Gafarov_M25_555/
‚îú‚îÄ‚îÄ data/ # JSON-—Ö—Ä–∞–Ω–∏–ª–∏—â–µ –¥–∞–Ω–Ω—ã—Ö
‚îÇ ‚îú‚îÄ‚îÄ users.json # –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ —Å–∏—Å—Ç–µ–º—ã
‚îÇ ‚îú‚îÄ‚îÄ portfolios.json # –ø–æ—Ä—Ç—Ñ–µ–ª–∏ –∏ –∫–æ—à–µ–ª—å–∫–∏
‚îÇ ‚îú‚îÄ‚îÄ rates.json # –∞–∫—Ç—É–∞–ª—å–Ω—ã–µ –∫—É—Ä—Å—ã (–∫—ç—à)
‚îÇ ‚îî‚îÄ‚îÄ exchange_rates.json # –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏–µ –¥–∞–Ω–Ω—ã–µ –∫—É—Ä—Å–æ–≤
‚îú‚îÄ‚îÄ valutatrade_hub/ # –æ—Å–Ω–æ–≤–Ω–æ–π –ø–∞–∫–µ—Ç
‚îÇ ‚îú‚îÄ‚îÄ core/ # –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞
‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ currencies.py # –∏–µ—Ä–∞—Ä—Ö–∏—è –≤–∞–ª—é—Ç
‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ exceptions.py # –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –∏—Å–∫–ª—é—á–µ–Ω–∏—è
‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ models.py # –¥–æ–º–µ–Ω–Ω—ã–µ –º–æ–¥–µ–ª–∏
‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ usecases.py # —Å—Ü–µ–Ω–∞—Ä–∏–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
‚îÇ ‚îÇ ‚îî‚îÄ‚îÄ utils.py # –≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
‚îÇ ‚îú‚îÄ‚îÄ infra/ # –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞
‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ settings.py # –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (Singleton)
‚îÇ ‚îÇ ‚îî‚îÄ‚îÄ database.py # –º–µ–Ω–µ–¥–∂–µ—Ä –ë–î (Singleton)
‚îÇ ‚îú‚îÄ‚îÄ parser_service/ # –ø–∞—Ä—Å–µ—Ä –∫—É—Ä—Å–æ–≤
‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ config.py # –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è API
‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ api_clients.py # –∫–ª–∏–µ–Ω—Ç—ã –≤–Ω–µ—à–Ω–∏—Ö API
‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ updater.py # –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫—É—Ä—Å–æ–≤
‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ storage.py # —Ö—Ä–∞–Ω–∏–ª–∏—â–µ –¥–∞–Ω–Ω—ã—Ö
‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ scheduler.py # –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π
‚îÇ ‚îÇ ‚îî‚îÄ‚îÄ usecases.py # —Å—Ü–µ–Ω–∞—Ä–∏–∏ –ø–∞—Ä—Å–µ—Ä–∞
‚îÇ ‚îú‚îÄ‚îÄ cli/ # –∫–æ–º–∞–Ω–¥–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
‚îÇ ‚îÇ ‚îî‚îÄ‚îÄ interface.py # –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∫–æ–º–∞–Ω–¥
‚îÇ ‚îú‚îÄ‚îÄ logging_config.py # –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
‚îÇ ‚îî‚îÄ‚îÄ decorators.py # –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä—ã (@log_action)
‚îú‚îÄ‚îÄ main.py # —Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞
‚îú‚îÄ‚îÄ pyproject.toml # –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Poetry
‚îú‚îÄ‚îÄ Makefile # –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è
‚îú‚îÄ‚îÄ .env.example # —à–∞–±–ª–æ–Ω –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
‚îî‚îÄ‚îÄ .gitignore

text

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞

1. **–ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è:**
```bash
git clone <–≤–∞—à-—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π>
cd finalproject_Gafarov_M25_555

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
make install

# –°–æ–∑–¥–∞–Ω–∏–µ —Ñ–∞–π–ª–∞ .env
cp .env.example .env
# –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ .env, –¥–æ–±–∞–≤–∏–≤ API –∫–ª—é—á

–ü–æ–ª—É—á–µ–Ω–∏–µ API –∫–ª—é—á–µ–π:

CoinGecko: –Ω–µ —Ç—Ä–µ–±—É–µ—Ç –∫–ª—é—á–∞ (–±–µ—Å–ø–ª–∞—Ç–Ω—ã–π –¥–æ—Å—Ç—É–ø)

ExchangeRate-API: –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ—Å—å –Ω–∞ https://www.exchangerate-api.com/

–î–æ–±–∞–≤—å—Ç–µ –∫–ª—é—á –≤ .env:

–ó–∞–ø—É—Å–∫
bash
# –ê–∫—Ç–∏–≤–∞—Ü–∏—è –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–≥–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è
poetry shell

# –ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
make project
# –∏–ª–∏
poetry run project

–û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã CLI
–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏
bash
# –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è
project register --username alice --password 1234

# –í—Ö–æ–¥
project login --username alice --password 1234

# –í—ã—Ö–æ–¥
project logout
–†–∞–±–æ—Ç–∞ —Å –ø–æ—Ä—Ç—Ñ–µ–ª–µ–º
bash
# –ü–æ–∫–∞–∑–∞—Ç—å –ø–æ—Ä—Ç—Ñ–µ–ª—å
project show-portfolio
project show-portfolio --base EUR  # –≤ –¥—Ä—É–≥–æ–π –≤–∞–ª—é—Ç–µ

# –ö—É–ø–∏—Ç—å –≤–∞–ª—é—Ç—É
project buy --currency BTC --amount 0.05

# –ü—Ä–æ–¥–∞—Ç—å –≤–∞–ª—é—Ç—É
project sell --currency BTC --amount 0.02
–†–∞–±–æ—Ç–∞ —Å –∫—É—Ä—Å–∞–º–∏ –≤–∞–ª—é—Ç
bash
# –û–±–Ω–æ–≤–∏—Ç—å –∫—É—Ä—Å—ã –∏–∑ –≤–Ω–µ—à–Ω–∏—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤
project update-rates
project update-rates --source coingecko  # —Ç–æ–ª—å–∫–æ –∫—Ä–∏–ø—Ç–æ–≤–∞–ª—é—Ç—ã

# –ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ –∫—É—Ä—Å—ã
project show-rates
project show-rates --top 5               # —Ç–æ–ø-5 –∫—Ä–∏–ø—Ç–æ–≤–∞–ª—é—Ç
project show-rates --currency EUR        # —Ç–æ–ª—å–∫–æ EUR
project show-rates --json                # –≤ —Ñ–æ—Ä–º–∞—Ç–µ JSON

# –ü–æ–ª—É—á–∏—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π –∫—É—Ä—Å
project get-rate --from USD --to EUR
project get-rate --from BTC --to USD
project get-rate --list                  # —Å–ø–∏—Å–æ–∫ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã—Ö –≤–∞–ª—é—Ç
üîß –ü–∞—Ä—Å–µ—Ä-—Å–µ—Ä–≤–∏—Å
–û—Ç–¥–µ–ª—å–Ω—ã–π —Ä–µ–∂–∏–º —Ä–∞–±–æ—Ç—ã
bash
# –ó–∞–ø—É—Å–∫ –ø–∞—Ä—Å–µ—Ä-—Å–µ—Ä–≤–∏—Å–∞ –æ—Ç–¥–µ–ª—å–Ω–æ
python main.py --mode=parser update
python main.py --mode=parser status
–†–µ–∂–∏–º—ã —Ä–∞–±–æ—Ç—ã –ø–∞—Ä—Å–µ—Ä–∞
–†—É—á–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ: update-rates

–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ: –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ –≤ scheduler.py (–∏–Ω—Ç–µ—Ä–≤–∞–ª: 5 –º–∏–Ω—É—Ç)

–ò—Å—Ç–æ—Ä–∏—è –∫—É—Ä—Å–æ–≤: —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ data/exchange_rates.json

–ò—Å—Ç–æ—á–Ω–∏–∫–∏ –¥–∞–Ω–Ω—ã—Ö
–ö—Ä–∏–ø—Ç–æ–≤–∞–ª—é—Ç—ã (5): CoinGecko API (BTC, ETH, SOL, BNB, ADA)

–§–∏–∞—Ç–Ω—ã–µ –≤–∞–ª—é—Ç—ã (8): ExchangeRate-API (EUR, GBP, JPY, CAD, AUD, CHF, CNY, RUB)

–†–µ–∑–µ—Ä–≤–Ω—ã–π —Ä–µ–∂–∏–º: –º–æ–∫-–¥–∞–Ω–Ω—ã–µ –ø—Ä–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ API

‚öôÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏
–ü–∞—Ç—Ç–µ—Ä–Ω—ã –ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
Singleton: SettingsLoader, DatabaseManager

Factory Method: —Å–æ–∑–¥–∞–Ω–∏–µ –≤–∞–ª—é—Ç —á–µ—Ä–µ–∑ get_currency()

Strategy: API –∫–ª–∏–µ–Ω—Ç—ã —Å –µ–¥–∏–Ω—ã–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–º

Decorator: @log_action –¥–ª—è –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è –æ–ø–µ—Ä–∞—Ü–∏–π

–ò–µ—Ä–∞—Ä—Ö–∏—è –≤–∞–ª—é—Ç
python
Currency (ABC)
‚îú‚îÄ‚îÄ FiatCurrency
‚îÇ   ‚îú‚îÄ‚îÄ issuing_country
‚îÇ   ‚îî‚îÄ‚îÄ get_display_info()
‚îî‚îÄ‚îÄ CryptoCurrency
    ‚îú‚îÄ‚îÄ algorithm
    ‚îú‚îÄ‚îÄ market_cap
    ‚îî‚îÄ‚îÄ get_display_info()
–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
InsufficientFundsError - –Ω–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Å—Ä–µ–¥—Å—Ç–≤

CurrencyNotFoundError - –Ω–µ–∏–∑–≤–µ—Å—Ç–Ω–∞—è –≤–∞–ª—é—Ç–∞

ApiRequestError - –æ—à–∏–±–∫–∞ –≤–Ω–µ—à–Ω–µ–≥–æ API

UserNotFoundError - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –Ω–∞–π–¥–µ–Ω

AuthenticationError - –æ—à–∏–±–∫–∞ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏

üìä –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
–§–æ—Ä–º–∞—Ç: JSON (–¥–ª—è –º–∞—à–∏–Ω–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏)

–£—Ä–æ–≤–µ–Ω—å: INFO (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é), DEBUG (–¥–ª—è –æ—Ç–ª–∞–¥–∫–∏)

–†–æ—Ç–∞—Ü–∏—è: —Ñ–∞–π–ª—ã logs/actions.log (10 –ú–ë, 5 —Ñ–∞–π–ª–æ–≤)

–ü—Ä–∏–º–µ—Ä –∑–∞–ø–∏—Å–∏ –ª–æ–≥–∞
json
{
  "timestamp": "2025-10-09T12:05:22",
  "action": "BUY",
  "user": "alice",
  "currency": "BTC",
  "amount": 0.05,
  "rate": 59300.00,
  "base": "USD",
  "result": "OK"
}
üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
–ë—ã—Å—Ç—Ä–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏
bash
# –ó–∞–ø—É—Å–∫ –¥–µ–º–æ-—Å–∫—Ä–∏–ø—Ç–∞
./demo_parser.sh

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∏–ª—è –∫–æ–¥–∞
make lint

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏–º–ø–æ—Ä—Ç–æ–≤
python -m pytest tests/ -v
–ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
bash
# –ü–æ–ª–Ω—ã–π —Ü–∏–∫–ª —Ä–∞–±–æ—Ç—ã
./examples/full_workflow.sh

# –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–∞—Ä—Å–µ—Ä–∞
./examples/parser_examples.py
üöÄ –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è
Makefile –∫–æ–º–∞–Ω–¥—ã
bash
make install     # —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
make project     # –∑–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
make build       # —Å–±–æ—Ä–∫–∞ –ø–∞–∫–µ—Ç–∞
make publish     # –ø—É–±–ª–∏–∫–∞—Ü–∏—è (dry-run)
make lint        # –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∏–ª—è –∫–æ–¥–∞ (Ruff)
–ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
env
EXCHANGERATE_API_KEY=–≤–∞—à_–∫–ª—é—á  # –∫–ª—é—á ExchangeRate-API
DATA_DIR=data                  # –ø—É—Ç—å –∫ –¥–∞–Ω–Ω—ã–º
LOG_LEVEL=INFO                 # —É—Ä–æ–≤–µ–Ω—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
üìà –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –∫—É—Ä—Å–æ–≤
–ü–æ–ª–∏—Ç–∏–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
TTL –∫—ç—à–∞: 300 —Å–µ–∫—É–Ω–¥ (5 –º–∏–Ω—É—Ç)

–ê–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ: –ø—Ä–∏ –∑–∞–ø—Ä–æ—Å–µ —É—Å—Ç–∞—Ä–µ–≤—à–∏—Ö –¥–∞–Ω–Ω—ã—Ö

–ò—Å—Ç–æ—Ä–∏—è: —Ö—Ä–∞–Ω–∏—Ç—Å—è 1000 –ø–æ—Å–ª–µ–¥–Ω–∏—Ö –∑–∞–ø–∏—Å–µ–π

–§–æ—Ä–º–∞—Ç—ã —Ö—Ä–∞–Ω–µ–Ω–∏—è
json
// rates.json (–∞–∫—Ç—É–∞–ª—å–Ω—ã–µ –∫—É—Ä—Å—ã)
{
  "pairs": {
    "BTC_USD": {
      "rate": 78077.00,
      "updated_at": "2026-02-01T18:41:54.418980Z",
      "source": "Multiple Sources"
    }
  }
}

// exchange_rates.json (–∏—Å—Ç–æ—Ä–∏—è)
{
  "id": "BTC_USD_2026-02-01T18:41:54Z",
  "from_currency": "BTC",
  "to_currency": "USD",
  "rate": 78077.00,
  "timestamp": "2026-02-01T18:41:54Z",
  "source": "CoinGecko"
}